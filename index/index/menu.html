<!DOCTYPE html>
<html>
<head>
<title>Menu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Arial;
  background:#f5f6fa;
  margin:0;
}
header{
  background:#2c3e50;
  color:white;
  padding:16px;
  text-align:center;
  font-size:20px;
}

/* MENU */
.menu{
  padding:16px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:14px;
}

.item{
  background:white;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,.1);
  overflow:hidden;
}

.item img{
  width:100%;
  height:120px;
  object-fit:cover;
}

.item div{
  padding:10px;
}

.item h3{
  margin:0;
  font-size:15px;
}

.item p{
  margin:6px 0;
  color:#555;
}

.item button{
  width:100%;
  border:none;
  background:#27ae60;
  color:white;
  padding:8px;
  border-radius:8px;
  cursor:pointer;
}

/* CART */
.cart-box{
  background:white;
  margin:14px;
  padding:14px;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,.1);
}

.cart-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:8px;
}

.cart-item button{
  background:#e74c3c;
  border:none;
  color:white;
  padding:4px 8px;
  border-radius:6px;
  margin:0 3px;
  cursor:pointer;
}

/* FORM */
input, textarea{
  width:100%;
  padding:10px;
  margin-top:8px;
  border-radius:8px;
  border:1px solid #ccc;
}

/* CONFIRM */
.confirm-btn{
  background:#2ecc71;
  color:white;
  width:95%;
  margin:16px auto;
  display:block;
  padding:14px;
  border:none;
  border-radius:14px;
  font-size:18px;
  cursor:pointer;
}
</style>
</head>

<body>

<header id="title"></header>

<!-- MENU -->
<div class="menu" id="menu"></div>

<!-- CART -->
<div class="cart-box">
<h3>üõí Cart</h3>
<div id="cart"></div>
<p id="total"></p>
</div>

<!-- DELIVERY -->
<div class="cart-box">
<h3>üìç Delivery Details</h3>
<input type="text" id="name" placeholder="Your Name">
<input type="tel" id="phone" placeholder="Phone Number" maxlength="10">
<textarea id="address" placeholder="Delivery Address"></textarea>
</div>

<button class="confirm-btn" onclick="confirmOrder()">Proceed to Confirm</button>

<script>
const category = localStorage.getItem("category") || "Bakery Items";
document.getElementById("title").innerText =
  "SAU VARIETY STORE ‚Äì " + category;

const DELIVERY = 40;
let cart = JSON.parse(localStorage.getItem("cart")) || [];

/* CATEGORY DATA */
const data = {
  "Bakery Items":[
    {name:"White Bread", price:40, img:"https://images.unsplash.com/photo-1542826438-8b10a43cdd2c"},
    {name:"Chocolate Cake", price:500, img:"https://images.unsplash.com/photo-1578985545062-69928b1d9587"},
    {name:"Strawberry Pastry", price:120, img:"https://images.unsplash.com/photo-1563729784474-d77dbb933a9b"}
  ],
  "Grocery & Kitchen":[
    {name:"Atta (5kg)", price:280, img:"https://images.unsplash.com/photo-1586201375761-83865001e31b"},
    {name:"Rice (5kg)", price:300, img:"https://images.unsplash.com/photo-1604908177522-0407a0f7f9b7"},
    {name:"Masala Pack", price:90, img:"https://images.unsplash.com/photo-1615485925694-34b3d2a7a2c0"}
  ],
  "Snacks & Drinks":[
    {name:"Biscuits", price:20, img:"https://images.unsplash.com/photo-1582719478250-c89cae4dc85b"},
    {name:"Cold Drinks", price:40, img:"https://images.unsplash.com/photo-1599785209798-45f1bcb79b10"},
    {name:"Chips", price:30, img:"https://images.unsplash.com/photo-1615484478243-1c77b6e23fdd"}
  ],
  "Daily Essentials":[
    {name:"Cooking Oil", price:160, img:"https://images.unsplash.com/photo-1617196031232-7c9d8f1edcb2"},
    {name:"Bath Soap", price:40, img:"https://images.unsplash.com/photo-1583947581924-860bda28e7b6"},
    {name:"Detergent", price:90, img:"https://images.unsplash.com/photo-1585386959984-a41552231693"}
  ]
};

/* LOAD MENU */
const menu = document.getElementById("menu");
data[category].forEach(i=>{
  menu.innerHTML += `
  <div class="item">
    <img src="${i.img}">
    <div>
      <h3>${i.name}</h3>
      <p>‚Çπ${i.price}</p>
      <button onclick="add('${i.name}',${i.price})">Add to Cart</button>
    </div>
  </div>`;
});

/* ADD CART */
function add(name,price){
  let item = cart.find(i=>i.name===name);
  item ? item.qty++ : cart.push({name,price,qty:1});
  save();
}

/* SAVE & RENDER */
function save(){
  localStorage.setItem("cart",JSON.stringify(cart));
  renderCart();
}

function renderCart(){
  let c = document.getElementById("cart");
  let t = 0;
  c.innerHTML = "";
  cart.forEach((i,idx)=>{
    t += i.price * i.qty;
    c.innerHTML += `
    <div class="cart-item">
      <span>${i.name}</span>
      <div>
        <button onclick="qty(${idx},-1)">‚àí</button>
        ${i.qty}
        <button onclick="qty(${idx},1)">+</button>
        <button onclick="removeItem(${idx})">‚ùå</button>
      </div>
    </div>`;
  });
  document.getElementById("total").innerText =
    cart.length ? `Subtotal ‚Çπ${t} + Delivery ‚Çπ${DELIVERY} = Total ‚Çπ${t+DELIVERY}` : "";
}
renderCart();

function qty(i,v){
  cart[i].qty += v;
  if(cart[i].qty<=0) cart.splice(i,1);
  save();
}
function removeItem(i){
  cart.splice(i,1);
  save();
}

/* CONFIRM */
function confirmOrder(){
  let n = document.getElementById("name").value.trim();
  let p = document.getElementById("phone").value.trim();
  let a = document.getElementById("address").value.trim();

  if(!n || !p || !a || cart.length===0){
    alert("Please fill all details & add items");
    return;
  }
  if(p.length !== 10){
    alert("Enter valid 10-digit phone number");
    return;
  }

  localStorage.setItem("order",
    JSON.stringify({name:n, phone:p, address:a, cart, delivery:DELIVERY})
  );
  window.location="confirm.html";
}

</script>

</body>
</html>
